$timeline-line-width: 4px;
$timeline-node-diameter: 14px;
$timeline-node-width: 2px;
$timeline-left: 25%;
$timeline-right: 75%;
$timeline-right-padding: 5rem;

.timeline {
  counter-reset: count;
  list-style: none;
  padding-left: 0;

  & > li {
    color: $color-gray;
    padding: 0 0 4rem;
  }

  li {
    list-style-type: none;
    margin: 0;
    max-width: 100%;
    position: relative;
   }

  .time {
    br {
      display: none;
    }
  }

  .time-description {
    display: block;
  }

  .step {
    margin: .25rem .25rem 1rem;

    .step-description {
      color: $color-gray-dark;
      display: block;
      font-size: initial;
      margin-top: $site-margins-mobile;
    }
  }

  .timeline-step-deadline {
    font-weight: $font-bold;
  }



  .usa-accordion {
    margin-top: $site-margins;

    .step {
      counter-increment: li;

      // building the step number dots
      &::before {
        // Display the counter
        background-color: $color-white;
        border: 3px solid $color-green;
        border-radius: 50%;
        color: $color-green;
        content: counter(count) '';
        counter-increment: count;
        display: inline-block;
        height: 35px;
        left: 1rem;
        line-height: 2.7rem;
        position: absolute;
        text-align: center;
        top: 1.9rem;
        width: 35px;
      }
    }

    .step-inactive {
      &::before {
        border-color: $color-gray-lightest;
        color: $color-gray-light;
      }
    }

    // setup accordion arrow
    button {
      background-image: url('../uswds/img/arrow-down.svg');
      background-position: right 2.25rem top 2.9rem;
      color: $color-green;
      font-size: 2rem;
      font-weight: $font-normal;
      padding: 2.5rem 5.5rem;

      &[aria-expanded='false'] {
        background-image: url('../uswds/img/arrow-right.svg');
      }
    }
    // inactive step button
    button[disabled] {
    background-color: $color-white;
    background-image: none;
    color: $color-gray-light;
    }
  }

  .usa-accordion-content {
    li {
      list-style-type: initial;
      max-width: $text-max-width;

      &::before {
        display: none;
    }
  }
}
}

@include media($medium-screen) {
  .timeline {
    > .timeline-step {
      &::before {
        background-color: $color-gray-light;
        content: '';
        display: block;
        height: 100%;
        left: $timeline-left;
        position: absolute;
        width: $timeline-line-width;
      }

      &::after {
        background-color: $color-white;
        border: $timeline-node-width solid $color-gray;
        border-radius: 25px;
        content: '';
        display: inline-block;
        height: $timeline-node-diameter;
        left: $timeline-left;
        margin-left: -5px;
        position: absolute;
        top: 1.5rem;
        width: $timeline-node-diameter;
      }
    }

    .timeline-step-deadline {
      &::after {
        border-color: $color-tertiary;
      }

      small {
        display: block;
        font-weight: $font-normal;
      }
    }



    .time {
      display: inline-block;
      padding-right: $timeline-right-padding;
      padding-top: 0;
      text-align: right;
      width: $timeline-left;

      br {
        display: initial;
      }
    }

    .time-description {
      display: inline-block;
      float: right;
      padding-left: $timeline-right-padding;
      padding-top: 1rem;
      position: relative;
      vertical-align: top;
      width: $timeline-right;
    }

    .usa-accordion {
      list-style: none;
      padding-left: calc(#{$timeline-left} + #{$timeline-right-padding});

      li {
        position: relative;

        &::before {
          left: 1rem;
        }
      }
    }
  }
}
